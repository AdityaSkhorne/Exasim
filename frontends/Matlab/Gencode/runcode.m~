function runstr = runcode(pde, numpde)


pdenum = " " + num2str(numpde) + " ";
DataPath = pde.buildpath;

mpirun = pde.mpirun;
if pde.platform == "cpu"        
    if pde.mpiprocs==1        
        exec = pde.buildpath + "/cpuEXASIM ";        
        runstr = "!" + exec + pdenum + DataPath + "/datain/ " + DataPath + "/dataout/out";        
    else        
        exec = pde.buildpath + "/cpumpiEXASIM ";
        runstr = "!" + mpirun + " -np " + runstring(pde.mpiprocs) + exec + pdenum + DataPath + "/datain/ " + DataPath + "/dataout/out";       
    end        
elseif pde.platform == "gpu"
    if pde.mpiprocs==1        
        exec = pde.buildpath + "/gpuEXASIM ";     
        runstr = "!" + exec + pdenum + DataPath + "/datain/ " + DataPath + "/dataout/out";        
    else        
        exec = pde.buildpath + "/gpumpiEXASIM ";
        runstr = "!" + mpirun + " -np " + string(pde.mpiprocs) + exec + pdenum + DataPath + "/datain/ " + DataPath + "/dataout/out";       
    end
end

displa("Run C++ Exasim code ...")

tic
eval(char(runstr));
toc

end

